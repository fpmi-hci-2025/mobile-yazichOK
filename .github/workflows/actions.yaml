name: Mobile

on:
  push:
    branches: [ main, dev, production ]
  pull_request:
    branches: [ main, dev, production ]

jobs:
  build-and-test:
    runs-on: macos-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Build and run unit tests
        run: |
          xcodebuild -project YazichOK/YazichOK.xcodeproj \
                     -scheme YazichOK \
                     -sdk iphonesimulator \
                     -destination 'platform=iOS Simulator' \
                     clean test -only-testing:YazichOKTests

      - name: Build and run UI tests
        run: |
          xcodebuild -project YazichOK/YazichOK.xcodeproj \
                     -scheme YazichOK \
                     -sdk iphonesimulator \
                     -destination 'platform=iOS Simulator' \
                     clean test -only-testing:YazichOKUITests
